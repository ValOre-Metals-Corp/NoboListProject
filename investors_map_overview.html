<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Geographic Distribution of ValOre NOBO List Investors â€“ Canada</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    #map {
      height: 100vh;
      width: 100%;
    }

    /* ðŸ”¹ BotÃ£o de retorno reposicionado ao lado do seletor Map/Satellite */
    #back-button {
      position: absolute;
      top: 15px;
      left: 210px; /* afastado do seletor do Google Maps */
      background-color: white;
      padding: 8px 14px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      color: #17193b;
      text-decoration: none;
      font-weight: 600;
      font-size: 13px;
      z-index: 10;
      transition: all 0.2s ease-in-out;
    }

    #back-button:hover {
      background-color: #f2f2f2;
      transform: translateY(-1px);
    }

    /* ðŸ”¹ TÃ­tulo flutuante */
    h3 {
      position: absolute;
      top: 60px;
      left: 15px;
      background: rgba(255,255,255,0.9);
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 16px;
      color: #17193b;
      z-index: 9;
      box-shadow: 0 1px 4px rgba(0,0,0,0.2);
      margin: 0;
    }
  </style>
</head>

<body>
  <!-- ðŸ”¹ BotÃ£o reposicionado -->
  <a href="index.html" id="back-button">â¬… Back to Dashboard</a>

  <!-- ðŸ”¹ TÃ­tulo -->
  <h3>Geographic Distribution of ValOre NOBO List Investors â€“ Canada</h3>

  <!-- ðŸ”¹ Mapa -->
  <div id="map"></div>

  <script>
    async function initMap() {
      const centerCanada = { lat: 56, lng: -96 };
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 4,
        center: centerCanada,
      });

      // LÃª os dados do JSON
      const response = await fetch("investors.json");
      const investors = await response.json();

      investors.forEach(inv => {
        if (inv.lat && inv.lon) {
          const marker = new google.maps.Marker({
            position: { lat: inv.lat, lng: inv.lon },
            map: map,
            title: `${inv.name} (${inv.city})`,
            icon: { url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png" }
          });

          const info = new google.maps.InfoWindow({
            content: `
              <div style="font-size:14px; line-height:1.4;">
                <b>${inv.name}</b><br>
                City: ${inv.city}<br>
                Shares: ${Number(inv.shares).toLocaleString()}<br>
                Tier: ${inv.tier}<br>
                Cluster: ${inv.cluster}<br>
                <hr>
                <b>Regional Data (FSA):</b><br>
                Avg. Income: $${Number(inv.income).toLocaleString('en-US', { maximumFractionDigits: 0 })} K<br>
                Avg. Age: ${Math.round(inv.age)} years
              </div>
            `
          });

          marker.addListener("click", () => {
            info.open(map, marker);
          });
        }
      });
    }
  </script>

  <!-- ðŸ”¹ Google Maps API -->
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDoarQv3Y06c5iWVEu3IFxZn7sp-yDPQog&callback=initMap">
  </script>
</body>
</html>
